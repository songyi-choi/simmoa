<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í”„ë¦¬ë¯¸ì—„ ì‚¬ì£¼íŒ”ì - ë‹¹ì‹ ì˜ ìš´ëª…ì„ ì½ë‹¤</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6727122014134843"
         crossorigin="anonymous"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;600;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #0a0a0a;
            color: #fff;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(236, 72, 153, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);
            z-index: 0;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 60px;
            padding: 40px 20px;
        }

        .header h1 {
            font-family: 'Noto Serif KR', serif;
            font-size: 3.5em;
            font-weight: 700;
            background: linear-gradient(135deg, #a78bfa 0%, #ec4899 50%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            letter-spacing: -1px;
        }

        .header .subtitle {
            font-size: 1.3em;
            color: #94a3b8;
            font-weight: 300;
            letter-spacing: 3px;
        }

        .form-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 50px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            margin-bottom: 40px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .form-group {
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            color: #e2e8f0;
            font-weight: 500;
            font-size: 0.95em;
            letter-spacing: 0.5px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: #fff;
            font-size: 1em;
            transition: all 0.3s ease;
            font-family: 'Noto Sans KR', sans-serif;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.08);
            border-color: #a78bfa;
            box-shadow: 0 0 0 4px rgba(167, 139, 250, 0.1);
        }

        .form-group input::placeholder {
            color: #64748b;
        }

        .form-group select option {
            background: #1e293b;
            color: #fff;
        }

        .datetime-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .submit-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
            border: none;
            border-radius: 16px;
            color: white;
            font-size: 1.3em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                0 10px 30px rgba(139, 92, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            letter-spacing: 1px;
            font-family: 'Noto Sans KR', sans-serif;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 15px 40px rgba(139, 92, 246, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 60px 20px;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 60px;
            height: 60px;
            margin: 0 auto 30px;
            border: 3px solid rgba(167, 139, 250, 0.2);
            border-top: 3px solid #a78bfa;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.2em;
            color: #94a3b8;
            font-weight: 300;
        }

        .result {
            display: none;
        }

        .result.show {
            display: block;
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 50px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        .result-header {
            text-align: center;
            margin-bottom: 50px;
            padding-bottom: 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .result-header h2 {
            font-family: 'Noto Serif KR', serif;
            font-size: 2.5em;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #a78bfa 0%, #ec4899 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .result-header .date {
            color: #94a3b8;
            font-size: 1.1em;
            font-weight: 300;
        }

        .saju-pillars {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 50px;
        }

        .pillar {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(236, 72, 153, 0.1) 100%);
            border: 1px solid rgba(167, 139, 250, 0.3);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
        }

        .pillar-label {
            color: #a78bfa;
            font-size: 0.9em;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .pillar-value {
            font-family: 'Noto Serif KR', serif;
            font-size: 2em;
            font-weight: 700;
            color: #fff;
        }

        .section {
            margin-bottom: 50px;
        }

        .section-title {
            font-family: 'Noto Serif KR', serif;
            font-size: 1.8em;
            margin-bottom: 25px;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 30px;
            background: linear-gradient(135deg, #a78bfa 0%, #ec4899 100%);
            border-radius: 2px;
        }

        .section-content {
            color: #cbd5e1;
            line-height: 2;
            font-size: 1.05em;
            font-weight: 300;
        }

        .section-content p {
            margin-bottom: 15px;
        }

        .ohaeng-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .ohaeng-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .ohaeng-label {
            font-size: 1.2em;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .ohaeng-stars {
            font-size: 1.5em;
            color: #fbbf24;
        }

        .fortune-score {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .score-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
        }

        .score-label {
            color: #94a3b8;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .score-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6 0%, #ec4899 100%);
            border-radius: 4px;
            transition: width 1s ease;
        }

        .score-value {
            color: #fff;
            font-size: 1.2em;
            font-weight: 600;
        }

        .highlight-box {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(236, 72, 153, 0.15) 100%);
            border-left: 4px solid #a78bfa;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .yearly-prediction {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .month-item {
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .month-item:last-child {
            border-bottom: none;
        }

        .month-label {
            color: #a78bfa;
            font-weight: 600;
            margin-bottom: 8px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2em;
            }
            
            .form-card {
                padding: 30px 20px;
            }
            
            .saju-pillars {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .ohaeng-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .datetime-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <div class="header">
            <h1>ğŸ”® ì‚¬ì£¼íŒ”ì</h1>
            <p class="subtitle">ì²œëª…ì„ ì½ê³  ìš´ëª…ì„ ê°œì²™í•˜ë‹¤</p>
        </div>

        <div class="form-card">
            <div class="form-grid">
                <div class="form-group">
                    <label>ì´ë¦„</label>
                    <input type="text" id="name" placeholder="ì„±í•¨ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>

                <div class="form-group">
                    <label>ì„±ë³„</label>
                    <select id="gender">
                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="ë‚¨ì„±">ë‚¨ì„±</option>
                        <option value="ì—¬ì„±">ì—¬ì„±</option>
                    </select>
                </div>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label>ìƒë…„ì›”ì¼</label>
                    <div class="datetime-grid">
                        <input type="number" id="year" placeholder="ë…„ (ì˜ˆ: 1990)" min="1900" max="2025">
                        <input type="number" id="month" placeholder="ì›” (1-12)" min="1" max="12">
                    </div>
                </div>

                <div class="form-group">
                    <label>ì¼ì‹œ</label>
                    <div class="datetime-grid">
                        <input type="number" id="day" placeholder="ì¼ (1-31)" min="1" max="31">
                        <select id="hour">
                            <option value="">ì‹œê°„</option>
                            <option value="ìì‹œ">ìì‹œ (23:30-01:29)</option>
                            <option value="ì¶•ì‹œ">ì¶•ì‹œ (01:30-03:29)</option>
                            <option value="ì¸ì‹œ">ì¸ì‹œ (03:30-05:29)</option>
                            <option value="ë¬˜ì‹œ">ë¬˜ì‹œ (05:30-07:29)</option>
                            <option value="ì§„ì‹œ">ì§„ì‹œ (07:30-09:29)</option>
                            <option value="ì‚¬ì‹œ">ì‚¬ì‹œ (09:30-11:29)</option>
                            <option value="ì˜¤ì‹œ">ì˜¤ì‹œ (11:30-13:29)</option>
                            <option value="ë¯¸ì‹œ">ë¯¸ì‹œ (13:30-15:29)</option>
                            <option value="ì‹ ì‹œ">ì‹ ì‹œ (15:30-17:29)</option>
                            <option value="ìœ ì‹œ">ìœ ì‹œ (17:30-19:29)</option>
                            <option value="ìˆ ì‹œ">ìˆ ì‹œ (19:30-21:29)</option>
                            <option value="í•´ì‹œ">í•´ì‹œ (21:30-23:29)</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>ì–‘ë ¥/ìŒë ¥</label>
                <select id="calendar">
                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="ì–‘ë ¥">ì–‘ë ¥</option>
                    <option value="ìŒë ¥">ìŒë ¥</option>
                </select>
            </div>

            <button type="button" class="submit-btn" onclick="analyzeSaju()">ìš´ëª… ë¶„ì„ ì‹œì‘í•˜ê¸°</button>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p class="loading-text">ì²œê¸°ë¥¼ ì½ê³  ìˆìŠµë‹ˆë‹¤...</p>
        </div>

        <div class="result" id="result"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/korean-lunar-calendar@0.3.6/dist/korean-lunar-calendar.min.js"></script>
    <script>
        // ë³„ ìƒì„±
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }
        createStars();

        // ============ ë§Œì„¸ë ¥ í•µì‹¬ ë°ì´í„° ============
        const ì²œê°„ = ['ê°‘', 'ì„', 'ë³‘', 'ì •', 'ë¬´', 'ê¸°', 'ê²½', 'ì‹ ', 'ì„', 'ê³„'];
        const ì§€ì§€ = ['ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´'];

        // ì ˆê¸° ë°ì´í„° (ê° ì›”ì˜ ì ˆì… ì‹œê°„ - ëŒ€ëµì  í‰ê· ê°’, ì‹¤ì œë¡œëŠ” ë§¤ë…„ ë‹¤ë¦„)
        // ì ˆê¸°: ì…ì¶˜(1), ê²½ì¹©(2), ì²­ëª…(3), ì…í•˜(4), ë§ì¢…(5), ì†Œì„œ(6), ì…ì¶”(7), ë°±ë¡œ(8), í•œë¡œ(9), ì…ë™(10), ëŒ€ì„¤(11), ì†Œí•œ(12)
        const ì ˆê¸°ì›” = {
            1: { name: 'ì…ì¶˜', day: 4 },   // ì¸ì›”
            2: { name: 'ê²½ì¹©', day: 6 },   // ë¬˜ì›”
            3: { name: 'ì²­ëª…', day: 5 },   // ì§„ì›”
            4: { name: 'ì…í•˜', day: 6 },   // ì‚¬ì›”
            5: { name: 'ë§ì¢…', day: 6 },   // ì˜¤ì›”
            6: { name: 'ì†Œì„œ', day: 7 },   // ë¯¸ì›”
            7: { name: 'ì…ì¶”', day: 8 },   // ì‹ ì›”
            8: { name: 'ë°±ë¡œ', day: 8 },   // ìœ ì›”
            9: { name: 'í•œë¡œ', day: 8 },   // ìˆ ì›”
            10: { name: 'ì…ë™', day: 7 },  // í•´ì›”
            11: { name: 'ëŒ€ì„¤', day: 7 },  // ìì›”
            12: { name: 'ì†Œí•œ', day: 6 }   // ì¶•ì›”
        };

        // ì›”ì§€ ìˆœì„œ (ì¸ì›”=1ì›”ë¶€í„°)
        const ì›”ì§€ìˆœì„œ = ['ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´', 'ì', 'ì¶•'];

        // ì˜¤í˜¸ë‘”ê°‘ë²• - ì—°ê°„ì— ë”°ë¥¸ ì›”ê°„ ì‹œì‘
        // ê°‘ê¸°ë…„ -> ë³‘ì¸ì›”, ì„ê²½ë…„ -> ë¬´ì¸ì›”, ë³‘ì‹ ë…„ -> ê²½ì¸ì›”, ì •ì„ë…„ -> ì„ì¸ì›”, ë¬´ê³„ë…„ -> ê°‘ì¸ì›”
        const ì›”ê°„ì‹œì‘ = {
            'ê°‘': 2, 'ê¸°': 2,  // ë³‘(2)ë¶€í„°
            'ì„': 4, 'ê²½': 4,  // ë¬´(4)ë¶€í„°
            'ë³‘': 6, 'ì‹ ': 6,  // ê²½(6)ë¶€í„°
            'ì •': 8, 'ì„': 8,  // ì„(8)ë¶€í„°
            'ë¬´': 0, 'ê³„': 0   // ê°‘(0)ë¶€í„°
        };

        // ì˜¤í˜¸ë‘”ê°‘ë²• - ì¼ê°„ì— ë”°ë¥¸ ì‹œê°„ ì‹œì‘
        // ê°‘ê¸°ì¼ -> ê°‘ìì‹œ, ì„ê²½ì¼ -> ë³‘ìì‹œ, ë³‘ì‹ ì¼ -> ë¬´ìì‹œ, ì •ì„ì¼ -> ê²½ìì‹œ, ë¬´ê³„ì¼ -> ì„ìì‹œ
        const ì‹œê°„ì‹œì‘ = {
            'ê°‘': 0, 'ê¸°': 0,  // ê°‘(0)ë¶€í„°
            'ì„': 2, 'ê²½': 2,  // ë³‘(2)ë¶€í„°
            'ë³‘': 4, 'ì‹ ': 4,  // ë¬´(4)ë¶€í„°
            'ì •': 6, 'ì„': 6,  // ê²½(6)ë¶€í„°
            'ë¬´': 8, 'ê³„': 8   // ì„(8)ë¶€í„°
        };

        // ì¤„ë¦¬ì•ˆë°ì´ ê³„ì‚° (ê·¸ë ˆê³ ë¦¬ë ¥ -> ì¤„ë¦¬ì•ˆ ì¼ìˆ˜)
        function getJulianDay(year, month, day) {
            if (month <= 2) {
                year -= 1;
                month += 12;
            }
            const A = Math.floor(year / 100);
            const B = 2 - A + Math.floor(A / 4);
            return Math.floor(365.25 * (year + 4716)) + Math.floor(30.6001 * (month + 1)) + day + B - 1524.5;
        }

        // ì¼ì§„ ê³„ì‚° (ì¤„ë¦¬ì•ˆë°ì´ ê¸°ë°˜)
        // ê¸°ì¤€ì¼: 1900ë…„ 1ì›” 31ì¼ = ê°‘ìì¼ (ì¤„ë¦¬ì•ˆë°ì´: 2415051)
        function getDayGanZhi(year, month, day) {
            const baseJD = 2415051; // 1900ë…„ 1ì›” 31ì¼ (ê°‘ìì¼)
            const currentJD = getJulianDay(year, month, day);
            const diff = Math.floor(currentJD - baseJD);
            const ganIndex = ((diff % 10) + 10) % 10;
            const zhiIndex = ((diff % 12) + 12) % 12;
            return { gan: ì²œê°„[ganIndex], zhi: ì§€ì§€[zhiIndex], ganIndex, zhiIndex };
        }

        // ì ˆê¸°ë ¥ ê¸°ì¤€ ì—°ì›” ê³„ì‚°
        function getSajuYearMonth(solarYear, solarMonth, solarDay) {
            let sajuYear = solarYear;
            let sajuMonth = solarMonth;

            // ì…ì¶˜ ì „ì´ë©´ ì „ë…„ë„
            if (solarMonth === 1 || (solarMonth === 2 && solarDay < ì ˆê¸°ì›”[1].day)) {
                sajuYear = solarYear - 1;
            }

            // í•´ë‹¹ ì›”ì˜ ì ˆì…ì¼ ì „ì´ë©´ ì „ì›”
            const ì ˆì…ì¼ = ì ˆê¸°ì›”[solarMonth]?.day || 6;
            if (solarDay < ì ˆì…ì¼) {
                sajuMonth = solarMonth - 1;
                if (sajuMonth === 0) sajuMonth = 12;
                // 1ì›” ì ˆì… ì „ì´ë©´ ì „ë…„ 12ì›”
                if (solarMonth === 1) {
                    sajuYear = solarYear - 1;
                }
            }

            return { sajuYear, sajuMonth };
        }

        // ì—°ì£¼ ê³„ì‚°
        function getYearGanZhi(sajuYear) {
            const ganIndex = (sajuYear - 4) % 10;
            const zhiIndex = (sajuYear - 4) % 12;
            return { gan: ì²œê°„[ganIndex], zhi: ì§€ì§€[zhiIndex], ganIndex, zhiIndex };
        }

        // ì›”ì£¼ ê³„ì‚° (ì˜¤í˜¸ë‘”ê°‘ë²• ì ìš©)
        function getMonthGanZhi(yearGan, sajuMonth) {
            // ì›”ì§€ëŠ” ì¸ì›”(1ì›”)=ì¸, ë¬˜ì›”(2ì›”)=ë¬˜ ...
            const zhiIndex = (sajuMonth + 1) % 12; // 1ì›”=ì¸(2), 2ì›”=ë¬˜(3)...
            const actualZhiIndex = (sajuMonth + 1) % 12;

            // ì›”ê°„ì€ ì˜¤í˜¸ë‘”ê°‘ë²•ìœ¼ë¡œ ê³„ì‚°
            const startGan = ì›”ê°„ì‹œì‘[yearGan];
            const ganIndex = (startGan + (sajuMonth - 1)) % 10;

            return { gan: ì²œê°„[ganIndex], zhi: ì›”ì§€ìˆœì„œ[sajuMonth - 1], ganIndex, zhiIndex: actualZhiIndex };
        }

        // ì‹œì£¼ ê³„ì‚° (ì˜¤í˜¸ë‘”ê°‘ë²• ì ìš©)
        function getHourGanZhi(dayGan, hourZhiIndex) {
            const startGan = ì‹œê°„ì‹œì‘[dayGan];
            const ganIndex = (startGan + hourZhiIndex) % 10;
            return { gan: ì²œê°„[ganIndex], zhi: ì§€ì§€[hourZhiIndex], ganIndex, zhiIndex: hourZhiIndex };
        }

        // ìŒë ¥ì„ ì–‘ë ¥ìœ¼ë¡œ ë³€í™˜
        function lunarToSolar(year, month, day) {
            try {
                const calendar = new KoreanLunarCalendar();
                calendar.setLunarDate(year, month, day, false);
                return {
                    year: calendar.getSolarYear(),
                    month: calendar.getSolarMonth(),
                    day: calendar.getSolarDay()
                };
            } catch (e) {
                // ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—ëŸ¬ ì‹œ ì›ë³¸ ë°˜í™˜
                return { year, month, day };
            }
        }

        // ì „ì²´ ì‚¬ì£¼ ê³„ì‚°
        function calculateSaju(year, month, day, hourName, calendarType) {
            let solarYear = year, solarMonth = month, solarDay = day;

            // ìŒë ¥ì´ë©´ ì–‘ë ¥ìœ¼ë¡œ ë³€í™˜
            if (calendarType === 'ìŒë ¥') {
                const converted = lunarToSolar(year, month, day);
                solarYear = converted.year;
                solarMonth = converted.month;
                solarDay = converted.day;
            }

            // ì ˆê¸°ë ¥ ê¸°ì¤€ ì—°ì›”
            const { sajuYear, sajuMonth } = getSajuYearMonth(solarYear, solarMonth, solarDay);

            // ì—°ì£¼
            const yearPillar = getYearGanZhi(sajuYear);

            // ì›”ì£¼
            const monthPillar = getMonthGanZhi(yearPillar.gan, sajuMonth);

            // ì¼ì£¼
            const dayPillar = getDayGanZhi(solarYear, solarMonth, solarDay);

            // ì‹œì£¼
            const hourMap = {
                'ìì‹œ': 0, 'ì¶•ì‹œ': 1, 'ì¸ì‹œ': 2, 'ë¬˜ì‹œ': 3, 'ì§„ì‹œ': 4, 'ì‚¬ì‹œ': 5,
                'ì˜¤ì‹œ': 6, 'ë¯¸ì‹œ': 7, 'ì‹ ì‹œ': 8, 'ìœ ì‹œ': 9, 'ìˆ ì‹œ': 10, 'í•´ì‹œ': 11
            };
            const hourZhiIndex = hourMap[hourName];
            const hourPillar = getHourGanZhi(dayPillar.gan, hourZhiIndex);

            return {
                year: yearPillar,
                month: monthPillar,
                day: dayPillar,
                hour: hourPillar,
                solarDate: { year: solarYear, month: solarMonth, day: solarDay },
                sajuDate: { year: sajuYear, month: sajuMonth }
            };
        }

        function analyzeSaju() {
            const name = document.getElementById('name').value.trim();
            const gender = document.getElementById('gender').value;
            const year = document.getElementById('year').value;
            const month = document.getElementById('month').value;
            const day = document.getElementById('day').value;
            const hour = document.getElementById('hour').value;
            const calendar = document.getElementById('calendar').value;

            if (!name || !gender || !year || !month || !day || !hour || !calendar) {
                alert('ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (year < 1900 || year > 2025 || month < 1 || month > 12 || day < 1 || day > 31) {
                alert('ìƒë…„ì›”ì¼ì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            document.getElementById('result').classList.remove('show');
            document.getElementById('loading').classList.add('show');

            setTimeout(() => {
                const result = generateDetailedFortune(name, gender, parseInt(year), parseInt(month), parseInt(day), hour, calendar);
                document.getElementById('loading').classList.remove('show');
                document.getElementById('result').innerHTML = result;
                document.getElementById('result').classList.add('show');
                document.getElementById('result').scrollIntoView({ behavior: 'smooth', block: 'start' });

                // URLì— ì…ë ¥ íŒŒë¼ë¯¸í„° ì¶”ê°€
                const url = new URL(window.location);
                url.searchParams.set('name', name);
                url.searchParams.set('g', gender);
                url.searchParams.set('y', year);
                url.searchParams.set('m', month);
                url.searchParams.set('d', day);
                url.searchParams.set('h', hour);
                url.searchParams.set('c', calendar);
                window.history.pushState({}, '', url);
            }, 2000);
        }

        function generateDetailedFortune(name, gender, year, month, day, hour, calendar) {
            // ì •í™•í•œ ì‚¬ì£¼ ê³„ì‚°
            const saju = calculateSaju(year, month, day, hour, calendar);

            const yearGan = saju.year.gan;
            const yearJi = saju.year.zhi;
            const monthGan = saju.month.gan;
            const monthJi = saju.month.zhi;
            const dayGan = saju.day.gan;
            const dayJi = saju.day.zhi;
            const hourGan = saju.hour.gan;
            const hourJi = saju.hour.zhi;

            const ohaeng = {
                'ê°‘': 'ëª©', 'ì„': 'ëª©', 'ë³‘': 'í™”', 'ì •': 'í™”', 'ë¬´': 'í† ',
                'ê¸°': 'í† ', 'ê²½': 'ê¸ˆ', 'ì‹ ': 'ê¸ˆ', 'ì„': 'ìˆ˜', 'ê³„': 'ìˆ˜',
                'ì': 'ìˆ˜', 'ì¶•': 'í† ', 'ì¸': 'ëª©', 'ë¬˜': 'ëª©', 'ì§„': 'í† ',
                'ì‚¬': 'í™”', 'ì˜¤': 'í™”', 'ë¯¸': 'í† ', 'ì‹ ': 'ê¸ˆ', 'ìœ ': 'ê¸ˆ',
                'ìˆ ': 'í† ', 'í•´': 'ìˆ˜'
            };

            const sajuChars = [yearGan, yearJi, monthGan, monthJi, dayGan, dayJi, hourGan, hourJi];
            const elements = {};
            sajuChars.forEach(char => {
                const elem = ohaeng[char];
                elements[elem] = (elements[elem] || 0) + 1;
            });

            const maxElement = Object.keys(elements).reduce((a, b) => elements[a] > elements[b] ? a : b);
            
            // ìš´ì„¸ ì ìˆ˜ ê³„ì‚°
            const fortuneScores = {
                wealth: 60 + Math.floor(Math.random() * 30),
                career: 55 + Math.floor(Math.random() * 35),
                health: 65 + Math.floor(Math.random() * 25),
                love: 50 + Math.floor(Math.random() * 40),
                study: 60 + Math.floor(Math.random() * 30)
            };

            let html = `
                <div class="result-card">
                    <div class="result-header">
                        <h2>${name}ë‹˜ì˜ ì‚¬ì£¼ëª…ë¦¬</h2>
                        <p class="date">${year}ë…„ ${month}ì›” ${day}ì¼ ${hour} Â· ${calendar}</p>
                    </div>

                    <div class="saju-pillars">
                        <div class="pillar">
                            <div class="pillar-label">å¹´æŸ± (ì—°ì£¼)</div>
                            <div class="pillar-value">${yearGan}${yearJi}</div>
                        </div>
                        <div class="pillar">
                            <div class="pillar-label">æœˆæŸ± (ì›”ì£¼)</div>
                            <div class="pillar-value">${monthGan}${monthJi}</div>
                        </div>
                        <div class="pillar">
                            <div class="pillar-label">æ—¥æŸ± (ì¼ì£¼)</div>
                            <div class="pillar-value">${dayGan}${dayJi}</div>
                        </div>
                        <div class="pillar">
                            <div class="pillar-label">æ™‚æŸ± (ì‹œì£¼)</div>
                            <div class="pillar-value">${hourGan}${hourJi}</div>
                        </div>
                    </div>

                    <div class="section">
                        <h3 class="section-title">ì˜¤í–‰ ë¶„ì„</h3>
                        <div class="ohaeng-grid">
                            <div class="ohaeng-item">
                                <div class="ohaeng-label">æœ¨ (ëª©)</div>
                                <div class="ohaeng-stars">${'â­'.repeat(elements['ëª©'] || 0)}</div>
                            </div>
                            <div class="ohaeng-item">
                                <div class="ohaeng-label">ç« (í™”)</div>
                                <div class="ohaeng-stars">${'â­'.repeat(elements['í™”'] || 0)}</div>
                            </div>
                            <div class="ohaeng-item">
                                <div class="ohaeng-label">åœŸ (í† )</div>
                                <div class="ohaeng-stars">${'â­'.repeat(elements['í† '] || 0)}</div>
                            </div>
                            <div class="ohaeng-item">
                                <div class="ohaeng-label">é‡‘ (ê¸ˆ)</div>
                                <div class="ohaeng-stars">${'â­'.repeat(elements['ê¸ˆ'] || 0)}</div>
                            </div>
                            <div class="ohaeng-item">
                                <div class="ohaeng-label">æ°´ (ìˆ˜)</div>
                                <div class="ohaeng-stars">${'â­'.repeat(elements['ìˆ˜'] || 0)}</div>
                            </div>
                        </div>
                        <div class="section-content">
                            <p>ê·€í•˜ì˜ ì‚¬ì£¼ëŠ” <strong>${maxElement}(${{'ëª©':'æœ¨','í™”':'ç«','í† ':'åœŸ','ê¸ˆ':'é‡‘','ìˆ˜':'æ°´'}[maxElement]})</strong> ê¸°ìš´ì´ ê°€ì¥ ê°•í•©ë‹ˆë‹¤. ${getElementAnalysis(maxElement)}</p>
                            <p>${getElementBalance(elements)}</p>
                        </div>
                    </div>

                    <div class="section">
                        <h3 class="section-title">2026ë…„ ìš´ì„¸ ì „ë§</h3>
                        <div class="fortune-score">
                            <div class="score-item">
                                <div class="score-label">ì¬ë¬¼ìš´</div>
                                <div class="score-bar"><div class="score-fill" style="width: ${fortuneScores.wealth}%"></div></div>
                                <div class="score-value">${fortuneScores.wealth}ì </div>
                            </div>
                            <div class="score-item">
                                <div class="score-label">ì‚¬ì—…/ì§ì¥ìš´</div>
                                <div class="score-bar"><div class="score-fill" style="width: ${fortuneScores.career}%"></div></div>
                                <div class="score-value">${fortuneScores.career}ì </div>
                            </div>
                            <div class="score-item">
                                <div class="score-label">ê±´ê°•ìš´</div>
                                <div class="score-bar"><div class="score-fill" style="width: ${fortuneScores.health}%"></div></div>
                                <div class="score-value">${fortuneScores.health}ì </div>
                            </div>
                            <div class="score-item">
                                <div class="score-label">ì• ì •ìš´</div>
                                <div class="score-bar"><div class="score-fill" style="width: ${fortuneScores.love}%"></div></div>
                                <div class="score-value">${fortuneScores.love}ì </div>
                            </div>
                        </div>
                        ${getYearlyPrediction(elements, fortuneScores, gender)}
                    </div>

                    <div class="section">
                        <h3 class="section-title">ì„±ê²©ê³¼ íƒ€ê³ ë‚œ ì¬ëŠ¥</h3>
                        <div class="section-content">
                            ${getPersonalityAnalysis(dayGan, elements, gender)}
                        </div>
                    </div>

                    <div class="section">
                        <h3 class="section-title">ì¬ë¬¼ìš´ Â· ê¸ˆì „ìš´</h3>
                        <div class="section-content">
                            ${getWealthFortune(elements, dayGan, fortuneScores.wealth)}
                        </div>
                    </div>

                    <div class="section">
                        <h3 class="section-title">ì§ì—…ìš´ Â· ì‚¬ì—…ìš´</h3>
                        <div class="section-content">
                            ${getCareerFortune(elements, dayGan, fortuneScores.career)}
                        </div>
                    </div>

                    <div class="section">
                        <h3 class="section-title">ê±´ê°•ìš´</h3>
                        <div class="section-content">
                            ${getHealthFortune(maxElement, elements)}
                        </div>
                    </div>

                    <div class="section">
                        <h3 class="section-title">ì• ì •ìš´ Â· ê²°í˜¼ìš´</h3>
                        <div class="section-content">
                            ${getLoveFortune(elements, gender, dayGan, fortuneScores.love)}
                        </div>
                    </div>

                    <div class="section">
                        <h3 class="section-title">2026ë…„ ì›”ë³„ ìš´ì„¸</h3>
                        ${getMonthlyFortune(elements, maxElement)}
                    </div>

                    <div class="highlight-box">
                        <h3 style="margin-bottom: 15px; font-size: 1.3em;">ğŸ’ ì¸ìƒ ì¡°ì–¸</h3>
                        <div class="section-content">
                            ${getLifeAdvice(name, elements, dayGan, gender)}
                        </div>
                    </div>

                    <div style="display: flex; gap: 15px; justify-content: center; margin-top: 40px; flex-wrap: wrap;">
                        <button onclick="copyLink()" style="padding: 16px 32px; background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%); border: none; border-radius: 12px; color: white; font-size: 1em; font-weight: 600; cursor: pointer; font-family: 'Noto Sans KR', sans-serif;">ğŸ“‹ ë§í¬ ë³µì‚¬</button>
                        <button onclick="shareKakao()" style="padding: 16px 32px; background: linear-gradient(135deg, #FEE500 0%, #f5d900 100%); border: none; border-radius: 12px; color: #3c1e1e; font-size: 1em; font-weight: 600; cursor: pointer; font-family: 'Noto Sans KR', sans-serif;">ğŸ’¬ ì¹´ì¹´ì˜¤í†¡</button>
                        <button onclick="shareTwitter()" style="padding: 16px 32px; background: linear-gradient(135deg, #1DA1F2 0%, #0d8bd9 100%); border: none; border-radius: 12px; color: white; font-size: 1em; font-weight: 600; cursor: pointer; font-family: 'Noto Sans KR', sans-serif;">ğŸ¦ íŠ¸ìœ„í„° ê³µìœ </button>
                    </div>
                </div>
            `;

            return html;
        }

        function getElementAnalysis(element) {
            const analyses = {
                'ëª©': 'ì°½ì˜ë ¥ê³¼ ì„±ì¥ ê°€ëŠ¥ì„±ì´ í’ë¶€í•œ ì‚¬ì£¼ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ê²ƒì„ ê°œì²™í•˜ê³  ë°œì „ì‹œí‚¤ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ë©°, ëŠì„ì—†ì´ ë°°ìš°ê³  ì„±ì¥í•˜ë ¤ëŠ” ì˜ì§€ê°€ ê°•í•©ë‹ˆë‹¤. ìœ ì—°í•œ ì‚¬ê³ ë°©ì‹ìœ¼ë¡œ ë³€í™”ì— ì˜ ì ì‘í•©ë‹ˆë‹¤.',
                'í™”': 'ì—´ì •ê³¼ ì—ë„ˆì§€ê°€ ë„˜ì¹˜ëŠ” ì‚¬ì£¼ì…ë‹ˆë‹¤. ë°ê³  ì ê·¹ì ì¸ ì„±ê²©ìœ¼ë¡œ ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ í™œë ¥ì„ ë¶ˆì–´ë„£ìŠµë‹ˆë‹¤. ë¦¬ë”ì‹­ì´ ìˆìœ¼ë©° ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ë¡œ ì£¼ëª©ë°›ëŠ” ì¬ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.',
                'í† ': 'ì•ˆì •ê°ê³¼ ì‹ ë¢°ê°ì„ ì£¼ëŠ” ì‚¬ì£¼ì…ë‹ˆë‹¤. í¬ìš©ë ¥ì´ í¬ê³  ì±…ì„ê°ì´ ê°•í•˜ë©°, ê¾¸ì¤€í•¨ê³¼ ì¸ë‚´ì‹¬ìœ¼ë¡œ ëª©í‘œë¥¼ ë‹¬ì„±í•©ë‹ˆë‹¤. ì¤‘ì¬ì ì—­í• ì„ ì˜ í•˜ë©° ì¡°ì§ì—ì„œ ì¤‘ì‹¬ì  ì—­í• ì„ í•©ë‹ˆë‹¤.',
                'ê¸ˆ': 'ì›ì¹™ê³¼ ì •ì˜ë¥¼ ì¤‘ì‹œí•˜ëŠ” ì‚¬ì£¼ì…ë‹ˆë‹¤. ê°•í•œ ì˜ì§€ë ¥ê³¼ ê²°ë‹¨ë ¥ìœ¼ë¡œ ì–´ë ¤ìš´ ìƒí™©ë„ ê·¹ë³µí•©ë‹ˆë‹¤. ë¶„ì„ì ì´ê³  ë…¼ë¦¬ì ì¸ ì‚¬ê³ ë¡œ ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.',
                'ìˆ˜': 'ì§€í˜œë¡­ê³  í†µì°°ë ¥ì´ ê¹Šì€ ì‚¬ì£¼ì…ë‹ˆë‹¤. ìƒí™©ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•˜ë©°, ì§ê´€ë ¥ì´ ë›°ì–´ë‚˜ ë³¸ì§ˆì„ ê¿°ëš«ì–´ ë´…ë‹ˆë‹¤. í•™ë¬¸ì´ë‚˜ ì˜ˆìˆ  ë¶„ì•¼ì—ì„œ ì¬ëŠ¥ì„ ë°œíœ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
            };
            return analyses[element];
        }

        function getElementBalance(elements) {
            const counts = Object.values(elements);
            const max = Math.max(...counts);
            const min = Math.min(...counts);
            
            if (max - min <= 1) {
                return 'ì˜¤í–‰ì˜ ê· í˜•ì´ ë§¤ìš° ì˜ ì¡í˜€ ìˆì–´ ì¡°í™”ë¡œìš´ ì‚¶ì„ ì‚´ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì–´ëŠ í•œìª½ìœ¼ë¡œ ì¹˜ìš°ì¹˜ì§€ ì•Šì•„ ì•ˆì •ì ì´ë©´ì„œë„ ë‹¤ì¬ë‹¤ëŠ¥í•œ ë©´ëª¨ë¥¼ ë³´ì…ë‹ˆë‹¤.';
            } else if (max - min === 2) {
                return 'ì˜¤í–‰ì´ ì „ë°˜ì ìœ¼ë¡œ ê· í˜•ìˆê²Œ ë¶„í¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤. íŠ¹ì • ë¶„ì•¼ì—ì„œ ê°•ì ì„ ë³´ì´ë©´ì„œë„ ë‹¤ë¥¸ ì˜ì—­ì—ì„œë„ ë¬´ë‚œí•œ ì„±ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
            } else {
                const weak = Object.keys(elements).find(k => elements[k] === min);
                return `ë¶€ì¡±í•œ ì˜¤í–‰ì„ ë³´ì™„í•˜ë©´ ë”ìš± ì¢‹ì€ ìš´ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ ${weak} ê¸°ìš´ì„ ë³´ì¶©í•˜ëŠ” ê²ƒì´ ë„ì›€ì´ ë©ë‹ˆë‹¤. ìƒ‰ìƒ, ë°©í–¥, ì§ì—… ì„ íƒ ë“±ì—ì„œ ì´ë¥¼ ê³ ë ¤í•˜ì„¸ìš”.`;
            }
        }

        function getPersonalityAnalysis(dayGan, elements, gender) {
            const base = {
                'ê°‘': `${gender === 'ë‚¨ì„±' ? 'í° ë‚˜ë¬´' : 'ì•„ë¦„ë‹¤ìš´ ë‚˜ë¬´'}ì²˜ëŸ¼ ë‹¹ë‹¹í•˜ê³  ì •ì§í•œ ì„±í’ˆì˜ ì†Œìœ ìì…ë‹ˆë‹¤. ë¦¬ë”ì‹­ì´ ê°•í•˜ë©° ì±…ì„ê°ì´ ë›°ì–´ë‚˜ ì£¼ë³€ ì‚¬ëŒë“¤ì˜ ì‹ ë¢°ë¥¼ ë°›ìŠµë‹ˆë‹¤. ì›ì¹™ì„ ì¤‘ì‹œí•˜ê³  ì •ì˜ë¡œìš´ ì¼ì— ì•ì¥ì„œëŠ” ì„±í–¥ì´ ìˆìŠµë‹ˆë‹¤. ë•Œë¡œëŠ” ìœµí†µì„±ì´ ë¶€ì¡±í•´ ë³´ì¼ ìˆ˜ ìˆìœ¼ë‚˜, ì´ëŠ” ê°•ì§í•œ ì‹ ë…ì—ì„œ ë¹„ë¡¯ë©ë‹ˆë‹¤.`,
                'ì„': `ìœ ì—°í•œ í’€ì²˜ëŸ¼ ë¶€ë“œëŸ½ê³  ì„¬ì„¸í•œ ì„±ê²©ì…ë‹ˆë‹¤. ë›°ì–´ë‚œ ì ì‘ë ¥ìœ¼ë¡œ ì–´ë–¤ í™˜ê²½ì—ì„œë„ ì˜ ì–´ìš¸ë¦¬ë©°, íƒ€ì¸ì˜ ê°ì •ì„ ì˜ ì´í•´í•©ë‹ˆë‹¤. ${gender === 'ë‚¨ì„±' ? 'ê²‰ìœ¼ë¡œëŠ” ë¶€ë“œëŸ¬ì›Œ ë³´ì—¬ë„ ì†ì€ ê°•í•œ ì˜ì§€' : 'ì—¬ì„±ìŠ¤ëŸ¬ìš´ ë§¤ë ¥ê³¼ ì§€í˜œ'}ë¥¼ ê²¸ë¹„í–ˆìŠµë‹ˆë‹¤. ì˜ˆìˆ ì  ê°ê°ì´ ë›°ì–´ë‚˜ë©° ì‹¬ë¯¸ì•ˆì´ ë°œë‹¬í–ˆìŠµë‹ˆë‹¤.`,
                'ë³‘': `íƒœì–‘ì²˜ëŸ¼ ë°ê³  ì—´ì •ì ì¸ ì„±ê²©ì˜ ì†Œìœ ìì…ë‹ˆë‹¤. ê¸ì •ì ì¸ ì—ë„ˆì§€ë¡œ ì£¼ë³€ì„ ë°ê²Œ í•˜ë©°, ì°½ì˜ë ¥ì´ í’ë¶€í•©ë‹ˆë‹¤. ì†”ì§í•˜ê³  ì§ì„¤ì ì¸ í™”ë²•ìœ¼ë¡œ ë•Œë¡œ ì˜¤í•´ë¥¼ ë°›ì„ ìˆ˜ ìˆìœ¼ë‚˜, ìˆœìˆ˜í•œ ë§ˆìŒì—ì„œ ë¹„ë¡¯ë©ë‹ˆë‹¤. ë¦¬ë”ì‹­ì´ ìˆìœ¼ë©° ë¬´ëŒ€ì— ì„œëŠ” ê²ƒì„ ë‘ë ¤ì›Œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`,
                'ì •': `ì´›ë¶ˆì²˜ëŸ¼ ë”°ëœ»í•˜ê³  ì„¬ì„¸í•œ ë§ˆìŒì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. ${gender === 'ì—¬ì„±' ? 'ì—¬ì„±ìŠ¤ëŸ¬ìš´ ìš°ì•„í•¨ê³¼' : 'ì„¬ì„¸í•œ ê°ìˆ˜ì„±ê³¼'} ì˜ˆìˆ ì  ì¬ëŠ¥ì„ íƒ€ê³ ë‚¬ìŠµë‹ˆë‹¤. ë°°ë ¤ì‹¬ì´ ê¹Šê³  íƒ€ì¸ì˜ ì•„í””ì„ ê³µê°í•˜ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ê°ì •ì´ í’ë¶€í•˜ì—¬ ì˜ˆìˆ , ìƒë‹´, êµìœ¡ ë¶„ì•¼ì—ì„œ ì¬ëŠ¥ì„ ë°œíœ˜í•©ë‹ˆë‹¤.`,
                'ë¬´': `ë†’ì€ ì‚°ì²˜ëŸ¼ ë¬µì§í•˜ê³  ì•ˆì •ì ì¸ ì„±í’ˆì…ë‹ˆë‹¤. í¬ìš©ë ¥ì´ í¬ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒìœ¼ë¡œ, ì£¼ë³€ì—ì„œ ì˜ì§€ê°€ ë˜ëŠ” ì¡´ì¬ì…ë‹ˆë‹¤. ì±…ì„ê°ì´ ê°•í•˜ê³  ë§¡ì€ ì¼ì„ ëê¹Œì§€ í•´ë‚´ëŠ” ëˆê¸°ê°€ ìˆìŠµë‹ˆë‹¤. ë³´ìˆ˜ì ì¸ ë©´ì´ ìˆìœ¼ë‚˜ ì´ëŠ” ì‹ ì¤‘í•¨ì˜ í‘œí˜„ì…ë‹ˆë‹¤.`,
                'ê¸°': `ê¸°ë¦„ì§„ ë•…ì²˜ëŸ¼ ì‹¤ì† ìˆê³  ê¼¼ê¼¼í•œ ì„±ê²©ì…ë‹ˆë‹¤. ê³„íšì ì´ê³  ì²´ê³„ì ìœ¼ë¡œ ì¼ì„ ì§„í–‰í•˜ë©°, ë””í…Œì¼ì„ ë†“ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ${gender === 'ì—¬ì„±' ? 'ì‚´ë¦¼ ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ê³ ' : 'ê²½ì œ ê´€ë…ì´ ëšœë ·í•˜ë©°'} ì¬í…Œí¬ì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤. ì¸ë‚´ì‹¬ì´ ê°•í•˜ê³  ì‘ì€ ê²ƒë„ ì†Œì¤‘íˆ ì—¬ê¹ë‹ˆë‹¤.`,
                'ê²½': `ì¹¼ì²˜ëŸ¼ ì˜ˆë¦¬í•˜ê³  ê°•í•œ ì˜ì§€ë¥¼ ê°€ì¡ŒìŠµë‹ˆë‹¤. ì •ì˜ê°ì´ ê°•í•˜ê³  ì›ì¹™ì„ ì¤‘ì‹œí•˜ë©°, ì˜³ê³  ê·¸ë¦„ì„ ë¶„ëª…íˆ í•©ë‹ˆë‹¤. ê²°ë‹¨ë ¥ì´ ìˆì–´ ë¹ ë¥¸ íŒë‹¨ê³¼ ì‹¤í–‰ë ¥ì„ ë³´ì…ë‹ˆë‹¤. ${gender === 'ë‚¨ì„±' ? 'ë‚¨ì„±ë‹¤ìš´ ì¹´ë¦¬ìŠ¤ë§ˆ' : 'ê°•ì¸í•œ ì—¬ì„±ìƒ'}ë¥¼ ëŒ€í‘œí•˜ë©°, ë²•ì¡°ê³„ë‚˜ êµ°ì¸, ê²½ì˜ìë¡œ ì„±ê³µí•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.`,
                'ì‹ ': `ê·€ê¸ˆì†ì²˜ëŸ¼ ì„¸ë ¨ë˜ê³  ìš°ì•„í•œ ì„±í’ˆì…ë‹ˆë‹¤. ì˜ˆë¦¬í•œ ê°ê°ê³¼ ë¶„ì„ë ¥ì„ íƒ€ê³ ë‚¬ìœ¼ë©°, ë¯¸ì  ê°ê°ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ì™„ë²½ì£¼ì˜ ì„±í–¥ì´ ìˆì–´ ìì‹ ê³¼ íƒ€ì¸ì—ê²Œ ì—„ê²©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ${gender === 'ì—¬ì„±' ? 'í’ˆìœ„ìˆëŠ” ì—¬ì„±ë¯¸' : 'ì„¸ë ¨ëœ ë‚¨ì„±ë¯¸'}ë¥¼ í’ê¸°ë©°, í’ˆì§ˆê³¼ ê°€ì¹˜ë¥¼ ì¤‘ì‹œí•©ë‹ˆë‹¤.`,
                'ì„': `í° ê°•ì²˜ëŸ¼ ë„“ê³  ê¹Šì€ ì§€í˜œë¥¼ ê°€ì¡ŒìŠµë‹ˆë‹¤. ìœ ì—°í•˜ê³  ìœµí†µì„± ìˆëŠ” ì‚¬ê³ ë°©ì‹ìœ¼ë¡œ ì–´ë ¤ìš´ ìƒí™©ë„ ìŠ¬ê¸°ë¡­ê²Œ í—¤ì³ë‚˜ê°‘ë‹ˆë‹¤. ììœ ë¡œìš´ ì˜í˜¼ìœ¼ë¡œ êµ¬ì†ë°›ëŠ” ê²ƒì„ ì‹«ì–´í•˜ë©°, ëª¨í—˜ì‹¬ì´ ê°•í•©ë‹ˆë‹¤. í†µì°°ë ¥ì´ ë›°ì–´ë‚˜ ë³¸ì§ˆì„ ê¿°ëš«ì–´ ë³´ëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤.`,
                'ê³„': `ë¹—ë¬¼ì´ë‚˜ ì´ìŠ¬ì²˜ëŸ¼ ìˆœìˆ˜í•˜ê³  ì‹ ë¹„ë¡œìš´ ì„±í’ˆì…ë‹ˆë‹¤. ê¹Šì€ ì‚¬ìƒ‰ê³¼ ì •ì‹ ì„¸ê³„ë¥¼ ì¤‘ì‹œí•˜ë©°, ì§ê´€ë ¥ì´ ë§¤ìš° ë°œë‹¬í–ˆìŠµë‹ˆë‹¤. ${gender === 'ì—¬ì„±' ? 'ì‹ ë¹„ë¡œìš´ ë§¤ë ¥' : 'ì§€ì ì¸ ì¹´ë¦¬ìŠ¤ë§ˆ'}ë¥¼ í’ê¸°ë©°, ì² í•™, ì¢…êµ, ì˜ˆìˆ  ë¶„ì•¼ì— ê´€ì‹¬ì´ ë§ìŠµë‹ˆë‹¤. ê°ìˆ˜ì„±ì´ ì˜ˆë¯¼í•˜ì—¬ íƒ€ì¸ì˜ ìˆ¨ê²¨ì§„ ê°ì •ë„ ì˜ ì½ìŠµë‹ˆë‹¤.`
            };
            
            let analysis = `<p>${base[dayGan]}</p>`;
            
            if (elements['ëª©'] >= 2) {
                analysis += `<p>ëª© ê¸°ìš´ì´ ê°•í•´ ì°½ì˜ì„±ê³¼ ì¶”ì§„ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ê±°ë‚˜ í˜ì‹ ì ì¸ ì•„ì´ë””ì–´ë¥¼ ì‹¤í˜„í•˜ëŠ” ë° ì¬ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.</p>`;
            }
            if (elements['í™”'] >= 2) {
                analysis += `<p>í™” ê¸°ìš´ì´ ê°•í•´ ì—´ì •ê³¼ í‘œí˜„ë ¥ì´ í’ë¶€í•©ë‹ˆë‹¤. ëŒ€ì¤‘ ì•ì—ì„œ ìì‹ ì„ í‘œí˜„í•˜ëŠ” ì¼ì´ë‚˜ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ëŠ¥ë ¥ì„ ìš”í•˜ëŠ” ë¶„ì•¼ì—ì„œ ë¹›ì„ ë°œí•©ë‹ˆë‹¤.</p>`;
            }
            if (elements['ìˆ˜'] >= 2) {
                analysis += `<p>ìˆ˜ ê¸°ìš´ì´ ê°•í•´ ì§€í˜œë¡­ê³  ì „ëµì  ì‚¬ê³ ê°€ ë›°ì–´ë‚©ë‹ˆë‹¤. ë³µì¡í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê±°ë‚˜ ì¥ê¸°ì ì¸ ê³„íšì„ ì„¸ìš°ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•©ë‹ˆë‹¤.</p>`;
            }
            
            return analysis;
        }

        function getWealthFortune(elements, dayGan, score) {
            let fortune = '';
            
            if (score >= 80) {
                fortune += `<p><strong>ì¬ë¬¼ìš´ì´ ë§¤ìš° ì¢‹ìŠµë‹ˆë‹¤!</strong> 2026ë…„ì€ ê¸ˆì „ì ìœ¼ë¡œ í’ìš”ë¡œìš´ í•œ í•´ê°€ ë  ê²ƒì…ë‹ˆë‹¤. íˆ¬ìë‚˜ ì‚¬ì—… í™•ì¥ì„ ê³ ë ¤í•˜ê¸° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.</p>`;
            } else if (score >= 65) {
                fortune += `<p><strong>ì¬ë¬¼ìš´ì´ ì¢‹ì€ í¸ì…ë‹ˆë‹¤.</strong> ê¾¸ì¤€í•œ ë…¸ë ¥ê³¼ ê³„íšì ì¸ ì¬í…Œí¬ë¡œ ìì‚°ì„ ì¦ì‹ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>`;
            } else {
                fortune += `<p><strong>ì¬ë¬¼ìš´ì´ í‰ë²”í•œ ìˆ˜ì¤€ì…ë‹ˆë‹¤.</strong> ë¬´ë¦¬í•œ íˆ¬ìë³´ë‹¤ëŠ” ì•ˆì •ì ì¸ ì €ì¶•ê³¼ ê³„íšì ì¸ ì†Œë¹„ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>`;
            }

            if (elements['ê¸ˆ'] >= 2) {
                fortune += `<p>ê¸ˆ ê¸°ìš´ì´ ê°•í•´ ì¬ë¬¼ì„ ëª¨ìœ¼ê³  ê´€ë¦¬í•˜ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ë¶€ë™ì‚° íˆ¬ìë‚˜ ê¸ˆìœµ ìƒí’ˆì— ê´€ì‹¬ì„ ê°€ì ¸ë³´ì„¸ìš”. íŠ¹íˆ 3ì›”, 6ì›”, 9ì›”ì— ì¢‹ì€ ì¬ë¬¼ ìš´ì´ ë”°ë¦…ë‹ˆë‹¤.</p>`;
            }
            
            if (elements['í† '] >= 2) {
                fortune += `<p>í†  ê¸°ìš´ì´ ê°•í•´ ì•ˆì •ì ì¸ ì¬ì‚° í˜•ì„±ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë¶€ë™ì‚°ì´ë‚˜ ì‹¤ë¬¼ ìì‚°ì— íˆ¬ìí•˜ë©´ ì¢‹ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í† ì§€ë‚˜ ê±´ë¬¼ ê´€ë ¨ ì‚¬ì—…ë„ ê¸¸í•©ë‹ˆë‹¤.</p>`;
            }

            if (dayGan === 'ê°‘' || dayGan === 'ì„') {
                fortune += `<p>ì¼ê°„ì´ ëª©ì´ë¯€ë¡œ ì„±ì¥ì„± ìˆëŠ” ë¶„ì•¼ì— íˆ¬ìí•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤. ìŠ¤íƒ€íŠ¸ì—…ì´ë‚˜ IT, ë°”ì´ì˜¤ ë¶„ì•¼ ë“± ë¯¸ë˜ ê°€ì¹˜ê°€ ìˆëŠ” ê³³ì— ê´€ì‹¬ì„ ë‘ì„¸ìš”.</p>`;
            }

            fortune += `<p><strong>ì¬ë¬¼ ì¦ì‹ íŒ:</strong> ${score >= 70 ? 'í˜„ì¬ì˜ í˜¸í™©ê¸°ë¥¼ ì˜ í™œìš©í•˜ë˜ ê³¼ìš•ì€ ê¸ˆë¬¼ì…ë‹ˆë‹¤. ìˆ˜ì…ì˜ 30%ëŠ” ë°˜ë“œì‹œ ì €ì¶•í•˜ì„¸ìš”.' : 'ì‘ì€ ëˆì´ë¼ë„ ê¾¸ì¤€íˆ ëª¨ìœ¼ëŠ” ìŠµê´€ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ë³µë¦¬ì˜ ë§ˆë²•ì„ í™œìš©í•˜ì„¸ìš”.'} 2026ë…„ í•˜ë°˜ê¸°ì— í° ì§€ì¶œì´ ì˜ˆìƒë˜ë¯€ë¡œ ìƒë°˜ê¸°ì— ì—¬ìœ ìê¸ˆì„ í™•ë³´í•´ ë‘ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>`;

            return fortune;
        }

        function getCareerFortune(elements, dayGan, score) {
            let fortune = '';

            if (score >= 80) {
                fortune += `<p><strong>ì§ì—…ìš´ì´ ìµœìƒì…ë‹ˆë‹¤!</strong> 2026ë…„ì€ ê²½ë ¥ì—ì„œ í° ë„ì•½ì„ ì´ë£° ìˆ˜ ìˆëŠ” í•´ì…ë‹ˆë‹¤. ìŠ¹ì§„, ì´ì§, ì°½ì—… ë“± ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦¬ê¸° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.</p>`;
            } else if (score >= 65) {
                fortune += `<p><strong>ì§ì—…ìš´ì´ ì¢‹ìŠµë‹ˆë‹¤.</strong> ì„±ì‹¤í•˜ê²Œ ì„í•˜ë©´ ì¸ì •ë°›ê³  ì¢‹ì€ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤.</p>`;
            } else {
                fortune += `<p><strong>ì§ì—…ìš´ì´ í‰ì´í•©ë‹ˆë‹¤.</strong> í˜„ì¬ ìœ„ì¹˜ì—ì„œ ì‹¤ë ¥ì„ ìŒ“ëŠ” ê²ƒì— ì§‘ì¤‘í•˜ì„¸ìš”. ì¡°ê¸‰í•´í•˜ì§€ ë§ê³  ë•Œë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ê²ƒë„ ì§€í˜œì…ë‹ˆë‹¤.</p>`;
            }

            const careers = {
                'ëª©': 'êµìœ¡, ì¶œíŒ, ì–¸ë¡ , IT, í™˜ê²½ ê´€ë ¨ ì—…ì¢…',
                'í™”': 'ë°©ì†¡, ì—°ì˜ˆ, ë§ˆì¼€íŒ…, ë””ìì¸, ìš”ì‹ì—…',
                'í† ': 'ë¶€ë™ì‚°, ê±´ì„¤, ë†ì—…, ì œì¡°ì—…, ê¸ˆìœµì—…',
                'ê¸ˆ': 'ë²•ì¡°ê³„, ê²½ì˜, íšŒê³„, ì˜ë£Œ, ê·€ê¸ˆì†ì—…',
                'ìˆ˜': 'í•™ë¬¸, ì—°êµ¬, ì»¨ì„¤íŒ…, ë¬¼ë¥˜, ìˆ˜ì‚°ì—…'
            };

            const maxElement = Object.keys(elements).reduce((a, b) => elements[a] > elements[b] ? a : b);
            fortune += `<p><strong>ì ì„±ì— ë§ëŠ” ì§ì—…:</strong> ${careers[maxElement]} ë“±ì´ ìœ ë¦¬í•©ë‹ˆë‹¤. ì´ ë¶„ì•¼ì—ì„œ íŠ¹ë³„í•œ ì¬ëŠ¥ì„ ë°œíœ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>`;

            if (elements['í™”'] >= 2 && elements['ëª©'] >= 2) {
                fortune += `<p>ì°½ì˜ì„±ê³¼ ì—´ì •ì„ ìš”í•˜ëŠ” ë¶„ì•¼ì—ì„œ í° ì„±ê³µì„ ê±°ë‘˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì‹ ë§Œì˜ ë¸Œëœë“œë¥¼ ë§Œë“¤ê±°ë‚˜ 1ì¸ ê¸°ì—…ì„ ì‹œì‘í•´ë„ ì¢‹ìŠµë‹ˆë‹¤. 4ì›”ê³¼ 7ì›”ì— ì¤‘ìš”í•œ ì‚¬ì—… ê¸°íšŒê°€ ì˜¬ ìˆ˜ ìˆìœ¼ë‹ˆ ì¤€ë¹„í•˜ì„¸ìš”.</p>`;
            }

            if (score >= 75) {
                fortune += `<p>2026ë…„ ìƒë°˜ê¸°(íŠ¹íˆ 2-4ì›”)ì— ìŠ¹ì§„ì´ë‚˜ ì¤‘ìš”í•œ í”„ë¡œì íŠ¸ ê¸°íšŒê°€ ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í‰ì†Œ ì¤€ë¹„í•´ì˜¨ ê²ƒì„ ì„ ë³´ì¼ ë•Œì…ë‹ˆë‹¤.</p>`;
            }

            fortune += `<p><strong>ê²½ë ¥ ë°œì „ ì¡°ì–¸:</strong> ì§€ì†ì ì¸ ìê¸°ê³„ë°œì´ í•µì‹¬ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ê¸°ìˆ ì´ë‚˜ ì™¸êµ­ì–´ë¥¼ ë°°ìš°ë©´ ì»¤ë¦¬ì–´ì— í° ë„ì›€ì´ ë©ë‹ˆë‹¤. íŠ¹íˆ ${score >= 70 ? 'ë¦¬ë”ì‹­ê³¼ ê¸°íšë ¥ì„ í‚¤ìš°ì„¸ìš”.' : 'ì „ë¬¸ì„± ê°•í™”ì— ì§‘ì¤‘í•˜ì„¸ìš”.'}</p>`;

            return fortune;
        }

        function getHealthFortune(maxElement, elements) {
            const health = {
                'ëª©': {
                    organ: 'ê°„, ë‹´ë‚­, ëˆˆ',
                    advice: 'ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤. ëˆˆì˜ í”¼ë¡œë¥¼ í’€ì–´ì£¼ê³ , ìˆ²ì´ë‚˜ ê³µì›ì—ì„œ ì‚°ì±…í•˜ë©° ëª© ê¸°ìš´ì„ ë³´ì¶©í•˜ì„¸ìš”. ì‹ ë§›ì´ ë‚˜ëŠ” ìŒì‹(ë ˆëª¬, ë§¤ì‹¤ ë“±)ì´ ë„ì›€ë©ë‹ˆë‹¤.',
                    exercise: 'ìš”ê°€, ìŠ¤íŠ¸ë ˆì¹­, ë“±ì‚°'
                },
                'í™”': {
                    organ: 'ì‹¬ì¥, ì†Œì¥, í˜ˆê´€',
                    advice: 'ê³¼ë„í•œ í¥ë¶„ì´ë‚˜ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í”¼í•˜ì„¸ìš”. ì¶©ë¶„í•œ ìˆ˜ë©´ê³¼ íœ´ì‹ì´ í•„ìˆ˜ì…ë‹ˆë‹¤. ì“´ë§› ë‚˜ëŠ” ìŒì‹(ë…¹ì°¨, ì—¬ì£¼ ë“±)ì´ ë„ì›€ë©ë‹ˆë‹¤.',
                    exercise: 'ìˆ˜ì˜, ëª…ìƒ, ê°€ë²¼ìš´ ì¡°ê¹…'
                },
                'í† ': {
                    organ: 'ë¹„ì¥, ìœ„ì¥',
                    advice: 'ê·œì¹™ì ì¸ ì‹ì‚¬ê°€ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤. ê³¼ì‹ì„ í”¼í•˜ê³  ì†Œí™”ê°€ ì˜ ë˜ëŠ” ìŒì‹ì„ ì„­ì·¨í•˜ì„¸ìš”. ë‹¨ë§›ì´ ë‚˜ëŠ” ìì—°ì‹í’ˆ(ê³ êµ¬ë§ˆ, ëŒ€ì¶” ë“±)ì´ ì¢‹ìŠµë‹ˆë‹¤.',
                    exercise: 'ì‚°ì±…, ê°€ë²¼ìš´ ì²´ì¡°, í•„ë¼í…ŒìŠ¤'
                },
                'ê¸ˆ': {
                    organ: 'í, ëŒ€ì¥, í”¼ë¶€',
                    advice: 'í˜¸í¡ê¸° ê±´ê°•ì— ìœ ì˜í•˜ê³ , ê³µê¸° ì¢‹ì€ ê³³ì—ì„œ ì‹¬í˜¸í¡í•˜ì„¸ìš”. ë¯¸ì„¸ë¨¼ì§€ê°€ ë§ì€ ë‚ ì€ ì™¸ì¶œì„ ìì œí•©ë‹ˆë‹¤. ë§¤ìš´ë§› ìŒì‹(ë¬´, ë„ë¼ì§€, ìƒê°• ë“±)ì´ ë„ì›€ë©ë‹ˆë‹¤.',
                    exercise: 'ë“±ì‚°, í˜¸í¡ ìš´ë™, ìˆ˜ì˜'
                },
                'ìˆ˜': {
                    organ: 'ì‹ ì¥, ë°©ê´‘, ê·€',
                    advice: 'ì¶©ë¶„í•œ ìˆ˜ë¶„ ì„­ì·¨ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤. í•˜ì²´ë¥¼ ë”°ëœ»í•˜ê²Œ ìœ ì§€í•˜ê³ , ê³¼ë¡œë¥¼ í”¼í•˜ì„¸ìš”. ì§ ë§›ì´ ì ë‹¹íˆ ìˆëŠ” ìŒì‹(ë¯¸ì—­, ë‹¤ì‹œë§ˆ ë“±)ì´ ì¢‹ìŠµë‹ˆë‹¤.',
                    exercise: 'ìˆ˜ì˜, ì•„ì¿ ì•„ë¡œë¹…, ê±·ê¸°'
                }
            };

            const h = health[maxElement];
            let fortune = `<p><strong>ì£¼ì˜í•´ì•¼ í•  ë¶€ìœ„:</strong> ${h.organ}ì— íŠ¹ë³„íˆ ê´€ì‹¬ì„ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.</p>`;
            fortune += `<p>${h.advice}</p>`;
            fortune += `<p><strong>ì¶”ì²œ ìš´ë™:</strong> ${h.exercise} ë“±ì´ ì²´ì§ˆì— ë§ìŠµë‹ˆë‹¤. ì¼ì£¼ì¼ì— ìµœì†Œ 3íšŒ, 30ë¶„ ì´ìƒ ê·œì¹™ì ìœ¼ë¡œ ìš´ë™í•˜ì„¸ìš”.</p>`;

            const totalElements = Object.values(elements).reduce((a, b) => a + b, 0);
            if (totalElements > 7) {
                fortune += `<p>ì „ë°˜ì ì¸ ê±´ê°•ìš´ì€ ì–‘í˜¸í•œ í¸ì…ë‹ˆë‹¤. ë‹¤ë§Œ ê³¼ë¡œë‚˜ ê³¼ì‹ì„ í”¼í•˜ê³  ê·œì¹™ì ì¸ ìƒí™œ ë¦¬ë“¬ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.</p>`;
            }

            fortune += `<p><strong>2026ë…„ ê±´ê°• ê´€ë¦¬ í¬ì¸íŠ¸:</strong> 1ì›”-3ì›”ì€ ë©´ì—­ë ¥ ê°•í™”ì— ì§‘ì¤‘í•˜ê³ , 4ì›”-6ì›”ì€ ì²´ë ¥ ê´€ë¦¬, 7ì›”-9ì›”ì€ ë”ìœ„ ë¨¹ì§€ ì•Šë„ë¡ ì£¼ì˜, 10ì›”-12ì›”ì€ ê´€ì ˆê³¼ í˜¸í¡ê¸° ê´€ë¦¬ì— ì‹ ê²½ì“°ì„¸ìš”. ì •ê¸° ê±´ê°•ê²€ì§„ì„ ì†Œí™€íˆ í•˜ì§€ ë§ˆì‹œê³ , íŠ¹íˆ ${maxElement === 'ëª©' ? 'ê°„ ê¸°ëŠ¥' : maxElement === 'í™”' ? 'ì‹¬í˜ˆê´€' : maxElement === 'í† ' ? 'ì†Œí™”ê¸°' : maxElement === 'ê¸ˆ' ? 'í˜¸í¡ê¸°' : 'ì‹ ì¥'} ê²€ì‚¬ë¥¼ ë°›ì•„ë³´ì‹œê¸¸ ê¶Œí•©ë‹ˆë‹¤.</p>`;

            return fortune;
        }

        function getLoveFortune(elements, gender, dayGan, score) {
            let fortune = '';

            if (score >= 80) {
                fortune += `<p><strong>ì• ì •ìš´ì´ ë§¤ìš° ì¢‹ìŠµë‹ˆë‹¤!</strong> ${gender === 'ë‚¨ì„±' ? 'ì´ìƒí˜•ì˜ ì—¬ì„±' : 'ì¢‹ì€ ë‚¨ì„±'}ì„ ë§Œë‚  í™•ë¥ ì´ ë†’ì€ ì‹œê¸°ì…ë‹ˆë‹¤. ê¸°ì¡´ ê´€ê³„ê°€ ìˆë‹¤ë©´ ë”ìš± ê¹Šì–´ì§€ê³  ë°œì „í•  ê²ƒì…ë‹ˆë‹¤.</p>`;
            } else if (score >= 65) {
                fortune += `<p><strong>ì• ì •ìš´ì´ ì¢‹ì€ í¸ì…ë‹ˆë‹¤.</strong> ì ê·¹ì ìœ¼ë¡œ ë‹¤ê°€ê°€ë©´ ì¢‹ì€ ê²°ê³¼ê°€ ìˆì„ ê²ƒì…ë‹ˆë‹¤.</p>`;
            } else {
                fortune += `<p><strong>ì• ì •ìš´ì´ í‰ë²”í•©ë‹ˆë‹¤.</strong> ì¡°ê¸‰í•´í•˜ì§€ ë§ê³  ìì—°ìŠ¤ëŸ¬ìš´ ë§Œë‚¨ì„ ê¸°ë‹¤ë¦¬ì„¸ìš”.</p>`;
            }

            const loveAdvice = {
                'ê°‘': `ì •ì§í•˜ê³  ì§„ì‹¤ëœ ë§ˆìŒìœ¼ë¡œ ë‹¤ê°€ê°€ì„¸ìš”. ${gender === 'ë‚¨ì„±' ? 'ì—¬ì„±' : 'ë‚¨ì„±'}ì€ ë‹¹ì‹ ì˜ ê³§ì€ ì„±í’ˆì— ë§¤ë ¥ì„ ëŠë‚ë‹ˆë‹¤.`,
                'ì„': `ë¶€ë“œëŸ½ê³  ì„¬ì„¸í•œ ë°°ë ¤ê°€ ë‹¹ì‹ ì˜ ê°•ì ì…ë‹ˆë‹¤. ìƒëŒ€ë°©ì˜ ë§ì„ ê²½ì²­í•˜ê³  ê³µê°í•´ì£¼ì„¸ìš”.`,
                'ë³‘': `ë°ê³  ê¸ì •ì ì¸ ì—ë„ˆì§€ë¡œ ìƒëŒ€ë¥¼ ì¦ê²ê²Œ í•´ì£¼ì„¸ìš”. ë‹¤ë§Œ ë„ˆë¬´ ì§ì„¤ì ì¸ í‘œí˜„ì€ ìì œí•˜ì„¸ìš”.`,
                'ì •': `ë”°ëœ»í•œ ë§ˆìŒê³¼ ì„¸ì‹¬í•œ ë°°ë ¤ë¡œ ìƒëŒ€ë°©ì„ ê°ë™ì‹œí‚¤ì„¸ìš”. ê°ì„±ì ì¸ ëŒ€í™”ê°€ ê´€ê³„ ë°œì „ì— ë„ì›€ë©ë‹ˆë‹¤.`,
                'ë¬´': `ë¯¿ìŒì§í•œ ëª¨ìŠµì´ ë§¤ë ¥ í¬ì¸íŠ¸ì…ë‹ˆë‹¤. ì•½ì†ì„ ì§€í‚¤ê³  ì±…ì„ê° ìˆëŠ” ëª¨ìŠµì„ ë³´ì—¬ì£¼ì„¸ìš”.`,
                'ê¸°': `ê¼¼ê¼¼í•˜ê³  ì‹¤ì†ìˆëŠ” ë©´ëª¨ë¥¼ ì–´í•„í•˜ì„¸ìš”. ì•ˆì •ì ì¸ ë¯¸ë˜ë¥¼ í•¨ê»˜ ê·¸ë¦´ ìˆ˜ ìˆìŒì„ ë³´ì—¬ì£¼ì„¸ìš”.`,
                'ê²½': `ê°•ì¸í•œ ì¹´ë¦¬ìŠ¤ë§ˆê°€ ë§¤ë ¥ì…ë‹ˆë‹¤. ë‹¤ë§Œ ì§€ë‚˜ì¹œ ì›ì¹™ì£¼ì˜ëŠ” í”¼í•˜ê³  ìœ ì—°í•¨ë„ ë³´ì—¬ì£¼ì„¸ìš”.`,
                'ì‹ ': `ì„¸ë ¨ë˜ê³  ìš°ì•„í•œ ë‹¹ì‹ ì˜ ë§¤ë ¥ì„ ë°œì‚°í•˜ì„¸ìš”. í’ˆìœ„ìˆëŠ” ë°ì´íŠ¸ ì¥ì†Œì™€ ì„ ë¬¼ ì„ íƒì— ì„¼ìŠ¤ë¥¼ ë³´ì´ì„¸ìš”.`,
                'ì„': `ì§€ì ì¸ ëŒ€í™”ì™€ í­ë„“ì€ êµì–‘ìœ¼ë¡œ ìƒëŒ€ë¥¼ ë§¤ë£Œì‹œí‚¤ì„¸ìš”. ììœ ë¡œìš´ ì˜í˜¼ì´ì§€ë§Œ ì§„ì§€í•¨ë„ ë³´ì—¬ì£¼ì„¸ìš”.`,
                'ê³„': `ì‹ ë¹„ë¡­ê³  ê¹Šì´ìˆëŠ” ë‹¹ì‹ ë§Œì˜ ë§¤ë ¥ì´ ìˆìŠµë‹ˆë‹¤. ì§„ì†”í•œ ëŒ€í™”ë¡œ ë§ˆìŒì„ ì—´ì–´ê°€ì„¸ìš”.`
            };

            fortune += `<p>${loveAdvice[dayGan]}</p>`;

            if (elements['ìˆ˜'] >= 2 || elements['ëª©'] >= 2) {
                fortune += `<p><strong>ì¢‹ì€ ë§Œë‚¨ì˜ ì‹œê¸°:</strong> 2026ë…„ 3ì›”, 5ì›”, 8ì›”, 11ì›”ì— íŠ¹ë³„í•œ ì¸ì—°ì„ ë§Œë‚  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì¹œêµ¬ì˜ ì†Œê°œë‚˜ ì·¨ë¯¸ í™œë™, ì˜¨ë¼ì¸ì„ í†µí•œ ë§Œë‚¨ì— ì—´ë¦° ë§ˆìŒìœ¼ë¡œ ì„í•˜ì„¸ìš”.</p>`;
            }

            if (score >= 70) {
                fortune += `<p>ê¸°ì¡´ ê´€ê³„ê°€ ìˆë‹¤ë©´ ê²°í˜¼ì´ë‚˜ ë™ê±° ë“± ê´€ê³„ì˜ ì§„ì „ì„ ê³ ë ¤í•  ìˆ˜ ìˆëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ìƒëŒ€ë°©ê³¼ ë¯¸ë˜ì— ëŒ€í•´ ì§„ì§€í•˜ê²Œ ì´ì•¼ê¸° ë‚˜ëˆ ë³´ì„¸ìš”. íŠ¹íˆ í•˜ë°˜ê¸°(9-11ì›”)ê°€ ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦¬ê¸° ì¢‹ì€ ë•Œì…ë‹ˆë‹¤.</p>`;
            }

            fortune += `<p><strong>ì—°ì•  ë°œì „ ë¹„ê²°:</strong> ${gender === 'ë‚¨ì„±' ? 'ê²½ì²­í•˜ëŠ” ìì„¸ì™€ ì‘ì€ ë°°ë ¤' : 'ì†”ì§í•œ ê°ì • í‘œí˜„ê³¼ ìì‹ ê°'}ì´ ê´€ê³„ ë°œì „ì˜ ì—´ì‡ ì…ë‹ˆë‹¤. ìƒëŒ€ë°©ì˜ ê´€ì‹¬ì‚¬ì— ì§„ì‹¬ìœ¼ë¡œ ê´€ì‹¬ì„ ê°€ì§€ê³ , í•¨ê»˜í•˜ëŠ” ì‹œê°„ì˜ ì§ˆì„ ë†’ì´ì„¸ìš”. ê°ˆë“±ì´ ìƒê¸°ë©´ ì¦‰ì‹œ í•´ê²°í•˜ë ¤ í•˜ê¸°ë³´ë‹¤ ì„œë¡œ ìƒê°í•  ì‹œê°„ì„ ê°€ì§„ í›„ ì°¨ë¶„íˆ ëŒ€í™”í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>`;

            return fortune;
        }

        function getYearlyPrediction(elements, scores, gender) {
            const maxElement = Object.keys(elements).reduce((a, b) => elements[a] > elements[b] ? a : b);
            
            let prediction = '<div class="yearly-prediction">';
            prediction += '<h4 style="margin-bottom: 20px; font-size: 1.2em;">2026ë…„ ì£¼ìš” ìš´ì„¸</h4>';
            
            prediction += `<p style="margin-bottom: 15px;">2026ë…„ì€ ${maxElement === 'ëª©' ? 'ìƒˆë¡œìš´ ì‹œì‘ê³¼ ì„±ì¥' : maxElement === 'í™”' ? 'ì—´ì •ê³¼ ë³€í™”' : maxElement === 'í† ' ? 'ì•ˆì •ê³¼ ê¸°ë°˜ ë‹¤ì§€ê¸°' : maxElement === 'ê¸ˆ' ? 'ê²°ë‹¨ê³¼ ì¶”ì§„' : 'ì§€í˜œì™€ í†µì°°'}ì˜ í•´ì…ë‹ˆë‹¤.</p>`;

            if (scores.career >= 75) {
                prediction += `<p style="margin-bottom: 15px;"><strong>ğŸ“ˆ ì§ì—…:</strong> ìƒë°˜ê¸°ì— ì¤‘ìš”í•œ ê¸°íšŒê°€ ì°¾ì•„ì˜µë‹ˆë‹¤. 2ì›”-4ì›” ì‚¬ì´ì— ìŠ¹ì§„ì´ë‚˜ ì´ì§, ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ì œì•ˆì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í‰ì†Œ ì¤€ë¹„í•´ì˜¨ ëŠ¥ë ¥ì„ ë§ˆìŒê» ë°œíœ˜í•  ë•Œì…ë‹ˆë‹¤. 7ì›”-8ì›”ì—ë„ ì¶”ê°€ì ì¸ ì¢‹ì€ ì†Œì‹ì´ ìˆì„ ê²ƒì…ë‹ˆë‹¤.</p>`;
            }

            if (scores.wealth >= 70) {
                prediction += `<p style="margin-bottom: 15px;"><strong>ğŸ’° ì¬ë¬¼:</strong> 3ì›”, 6ì›”, 9ì›”, 12ì›”ì— ì¬ë¬¼ìš´ì´ íŠ¹íˆ ì¢‹ìŠµë‹ˆë‹¤. ë¶€ë™ì‚° íˆ¬ìë¥¼ ê³ ë ¤í•œë‹¤ë©´ ìƒë°˜ê¸°ê°€ ì ê¸°ì…ë‹ˆë‹¤. ë‹¤ë§Œ 8ì›”ì—ëŠ” ì˜ˆìƒì¹˜ ëª»í•œ ì§€ì¶œì´ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ ë¹„ìƒê¸ˆì„ ì¤€ë¹„í•´ë‘ì„¸ìš”.</p>`;
            }

            if (scores.love >= 75) {
                prediction += `<p style="margin-bottom: 15px;"><strong>ğŸ’• ì• ì •:</strong> ${gender === 'ë‚¨ì„±' ? '3ì›”, 5ì›”, 8ì›”' : '4ì›”, 6ì›”, 9ì›”'}ì— ì¢‹ì€ ë§Œë‚¨ì´ë‚˜ ê´€ê³„ ë°œì „ì˜ ê¸°íšŒê°€ ìˆìŠµë‹ˆë‹¤. ${gender === 'ë‚¨ì„±' ? 'ì—¬ì„±' : 'ë‚¨ì„±'}ê³¼ì˜ ì†Œí†µì— ì ê·¹ì ìœ¼ë¡œ ì„í•˜ì„¸ìš”. 11ì›”ì—ëŠ” ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦´ ìˆ˜ ìˆëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.</p>`;
            }

            prediction += `<p style="margin-bottom: 15px;"><strong>ğŸ¥ ê±´ê°•:</strong> ì „ë°˜ì ìœ¼ë¡œ ë¬´ë‚œí•˜ë‚˜, í™˜ì ˆê¸°ì¸ 3ì›”ê³¼ 9ì›”-10ì›”ì— ê°ê¸°ë‚˜ ì†Œí™”ê¸° ì§ˆí™˜ì— ì£¼ì˜í•˜ì„¸ìš”. ê·œì¹™ì ì¸ ìš´ë™ê³¼ ì¶©ë¶„í•œ ìˆ˜ë©´ì´ ê±´ê°• ìœ ì§€ì˜ í•µì‹¬ì…ë‹ˆë‹¤.</p>`;

            prediction += `<p><strong>âš ï¸ ì£¼ì˜ì‚¬í•­:</strong> 5ì›”ê³¼ 8ì›”ì€ ê°ì • ê¸°ë³µì´ ì‹¬í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì¤‘ìš”í•œ ê²°ì •ì€ ì‹ ì¤‘í•˜ê²Œ ë‚´ë¦¬ì„¸ìš”. 10ì›”ì—ëŠ” ì¸ê°„ê´€ê³„ì—ì„œ ì˜¤í•´ê°€ ìƒê¸¸ ìˆ˜ ìˆìœ¼ë‹ˆ ëª…í™•í•œ ì˜ì‚¬ì†Œí†µì„ í•˜ì„¸ìš”.</p>`;
            
            prediction += '</div>';
            return prediction;
        }

        function getMonthlyFortune(elements, maxElement) {
            const months = [
                { month: '1ì›”', fortune: 'ìƒˆí•´ë¥¼ ë§ì•„ ê³„íšì„ ì„¸ìš°ê¸° ì¢‹ì€ ë‹¬ì…ë‹ˆë‹¤. ëª©í‘œë¥¼ êµ¬ì²´í™”í•˜ê³  ì‹¤ì²œ ë°©ì•ˆì„ ë§ˆë ¨í•˜ì„¸ìš”.', luck: 'â˜…â˜…â˜…â˜†â˜†' },
                { month: '2ì›”', fortune: 'ëŒ€ì¸ê´€ê³„ê°€ í™œë°œí•´ì§‘ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí‚¹ í–‰ì‚¬ë‚˜ ëª¨ì„ì— ì ê·¹ ì°¸ì—¬í•˜ë©´ ì¢‹ì€ ì¸ì—°ì„ ë§Œë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', luck: 'â˜…â˜…â˜…â˜…â˜†' },
                { month: '3ì›”', fortune: 'ìƒˆë¡œìš´ ì‹œì‘ì˜ ê¸°ìš´ì´ ê°•í•©ë‹ˆë‹¤. ì´ì§, ì°½ì—…, ì¤‘ìš”í•œ ê³„ì•½ ë“±ì„ ê³ ë ¤í•˜ê¸° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.', luck: 'â˜…â˜…â˜…â˜…â˜…' },
                { month: '4ì›”', fortune: 'ê°ì • ê¸°ë³µì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ê²°ì •ì€ í•œ í…œí¬ ëŠ¦ì¶”ê³  ì‹ ì¤‘í•˜ê²Œ íŒë‹¨í•˜ì„¸ìš”.', luck: 'â˜…â˜…â˜…â˜†â˜†' },
                { month: '5ì›”', fortune: 'ì¬ë¬¼ìš´ì´ ìƒìŠ¹í•©ë‹ˆë‹¤. íˆ¬ìë‚˜ ì¬í…Œí¬ì— ê´€ì‹¬ì„ ê°€ì ¸ë³´ì„¸ìš”. ë‹¤ë§Œ ë¬´ë¦¬í•œ íˆ¬ìëŠ” ê¸ˆë¬¼ì…ë‹ˆë‹¤.', luck: 'â˜…â˜…â˜…â˜…â˜†' },
                { month: '6ì›”', fortune: 'ê±´ê°• ê´€ë¦¬ì— ì‹ ê²½ì“¸ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ê³¼ë¡œë¥¼ í”¼í•˜ê³  ì¶©ë¶„í•œ íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”.', luck: 'â˜…â˜…â˜…â˜†â˜†' },
                { month: '7ì›”', fortune: 'ì§ì¥ì—ì„œ ì¸ì •ë°›ì„ ì¼ì´ ìƒê¹ë‹ˆë‹¤. ì—´ì‹¬íˆ í•´ì˜¨ ë…¸ë ¥ì˜ ê²°ì‹¤ì„ ë§ºëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.', luck: 'â˜…â˜…â˜…â˜…â˜…' },
                { month: '8ì›”', fortune: 'ì˜ˆìƒì¹˜ ëª»í•œ ì§€ì¶œì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¯¸ë¦¬ ì˜ˆì‚°ì„ ì§œê³  ê³„íšì ìœ¼ë¡œ ì†Œë¹„í•˜ì„¸ìš”.', luck: 'â˜…â˜…â˜†â˜†â˜†' },
                { month: '9ì›”', fortune: 'í•™ì—…ì´ë‚˜ ìê¸°ê³„ë°œì— ì¢‹ì€ ë‹¬ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ê³µë¶€ë¥¼ ì‹œì‘í•˜ê±°ë‚˜ ìê²©ì¦ì— ë„ì „í•´ë³´ì„¸ìš”.', luck: 'â˜…â˜…â˜…â˜…â˜†' },
                { month: '10ì›”', fortune: 'ì¸ê°„ê´€ê³„ì—ì„œ ì˜¤í•´ê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª…í™•í•œ ì˜ì‚¬ì†Œí†µê³¼ ê²½ì²­ì´ í•„ìš”í•©ë‹ˆë‹¤.', luck: 'â˜…â˜…â˜…â˜†â˜†' },
                { month: '11ì›”', fortune: 'ì• ì •ìš´ì´ ìƒìŠ¹í•©ë‹ˆë‹¤. ì¢‹ì€ ë§Œë‚¨ì´ë‚˜ ê´€ê³„ ë°œì „ì˜ ê¸°íšŒê°€ ìˆìœ¼ë‹ˆ ì ê·¹ì ìœ¼ë¡œ ì„í•˜ì„¸ìš”.', luck: 'â˜…â˜…â˜…â˜…â˜…' },
                { month: '12ì›”', fortune: 'í•œ í•´ë¥¼ ë§ˆë¬´ë¦¬í•˜ë©° ì„±ì°°ì˜ ì‹œê°„ì„ ê°€ì§€ì„¸ìš”. ë‚´ë…„ ê³„íšì„ ì„¸ìš°ê¸° ì¢‹ì€ ë•Œì…ë‹ˆë‹¤.', luck: 'â˜…â˜…â˜…â˜…â˜†' }
            ];

            let html = '<div class="yearly-prediction">';
            months.forEach(m => {
                html += `
                    <div class="month-item">
                        <div class="month-label">${m.month} ${m.luck}</div>
                        <div style="color: #cbd5e1; margin-top: 5px;">${m.fortune}</div>
                    </div>
                `;
            });
            html += '</div>';
            return html;
        }

        function getLifeAdvice(name, elements, dayGan, gender) {
            const maxElement = Object.keys(elements).reduce((a, b) => elements[a] > elements[b] ? a : b);
            
            let advice = `<p>${name}ë‹˜, ê·€í•˜ì˜ ì‚¬ì£¼ëŠ” ${maxElement} ê¸°ìš´ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì¡°í™”ë¥¼ ì´ë£¨ê³  ìˆìŠµë‹ˆë‹¤. íƒ€ê³ ë‚œ ì¬ëŠ¥ê³¼ ë…¸ë ¥ì´ ë§Œë‚˜ë©´ ë°˜ë“œì‹œ ì„±ê³µí•  ìˆ˜ ìˆëŠ” ëª…ì¡°ì…ë‹ˆë‹¤.</p>`;

            advice += `<p><strong>ì¸ìƒì˜ ì „í™˜ì :</strong> 30ëŒ€ ì´ˆë°˜, 40ëŒ€ ì¤‘ë°˜, 50ëŒ€ í›„ë°˜ì´ ì¤‘ìš”í•œ ì „í™˜ê¸°ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ì´ ì‹œê¸°ì— í° ê²°ì •ì„ ë‚´ë¦¬ê±°ë‚˜ ìƒˆë¡œìš´ ë„ì „ì„ í•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.</p>`;

            advice += `<p><strong>ì„±ê³µì˜ ë¹„ê²°:</strong> ${
                maxElement === 'ëª©' ? 'ëŠì„ì—†ëŠ” í•™ìŠµê³¼ ì„±ì¥ ë§ˆì¸ë“œë¥¼ ìœ ì§€í•˜ì„¸ìš”. ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ìƒˆë¡œìš´ ê²ƒì— ë„ì „í•˜ëŠ” ìš©ê¸°ê°€ ì„±ê³µì˜ ì—´ì‡ ì…ë‹ˆë‹¤.' :
                maxElement === 'í™”' ? 'ì—´ì •ì„ ìƒì§€ ë§ˆì„¸ìš”. ë‹¤ë§Œ ì§€ë‚˜ì¹œ ì¶©ë™ì€ ê²½ê³„í•˜ê³ , ì—´ì •ê³¼ ì´ì„±ì˜ ê· í˜•ì„ ë§ì¶”ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.' :
                maxElement === 'í† ' ? 'ê¾¸ì¤€í•¨ì´ ê°€ì¥ í° ë¬´ê¸°ì…ë‹ˆë‹¤. ì¡°ê¸‰í•´í•˜ì§€ ë§ê³  ì°¨ê·¼ì°¨ê·¼ ê¸°ë°˜ì„ ë‹¤ì§€ë©´ ë°˜ë“œì‹œ ì„±ê³µí•  ê²ƒì…ë‹ˆë‹¤.' :
                maxElement === 'ê¸ˆ' ? 'ì›ì¹™ê³¼ ìœµí†µì„±ì˜ ê· í˜•ì„ ë§ì¶”ì„¸ìš”. ë•Œë¡œëŠ” ìœ ì—°í•¨ì´ ë” í° ì„±ê³µì„ ê°€ì ¸ë‹¤ì¤ë‹ˆë‹¤.' :
                'ì§ê´€ì„ ë¯¿ë˜ ë…¼ë¦¬ë„ í•¨ê»˜ í™œìš©í•˜ì„¸ìš”. ê°ì„±ê³¼ ì´ì„±ì˜ ì¡°í™”ê°€ ìµœê³ ì˜ ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤.'
            }</p>`;

            advice += `<p><strong>í‰ìƒ ëª…ì‹¬í•  ë•ëª©:</strong> ê²¸ì†í•¨ì„ ìƒì§€ ë§ˆì„¸ìš”. ë†’ì€ ê³³ì— ì˜¤ë¥¼ìˆ˜ë¡ ë”ìš± ê²¸ì†í•´ì ¸ì•¼ í•©ë‹ˆë‹¤. ì£¼ë³€ ì‚¬ëŒë“¤ì— ëŒ€í•œ ê°ì‚¬ë¥¼ ìŠì§€ ë§ê³ , ë‚˜ëˆ”ì„ ì‹¤ì²œí•˜ë©´ ë” í° ë³µì´ ëŒì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤.</p>`;

            advice += `<p><strong>í–‰ìš´ì˜ ë°©í–¥ê³¼ ìƒ‰ìƒ:</strong> ${
                maxElement === 'ëª©' ? 'ë™ìª½ ë°©í–¥, ì²­ë¡ìƒ‰ê³¼ ì´ˆë¡ìƒ‰' :
                maxElement === 'í™”' ? 'ë‚¨ìª½ ë°©í–¥, ë¹¨ê°•ìƒ‰ê³¼ ë³´ë¼ìƒ‰' :
                maxElement === 'í† ' ? 'ì¤‘ì•™, í™©ìƒ‰ê³¼ ê°ˆìƒ‰' :
                maxElement === 'ê¸ˆ' ? 'ì„œìª½ ë°©í–¥, í°ìƒ‰ê³¼ ê¸ˆìƒ‰' :
                'ë¶ìª½ ë°©í–¥, ê²€ì •ìƒ‰ê³¼ ë‚¨ìƒ‰'
            }ì´ ê·€í•˜ì—ê²Œ í–‰ìš´ì„ ê°€ì ¸ë‹¤ ì¤ë‹ˆë‹¤. ì¤‘ìš”í•œ ì¼ì„ í•  ë•Œ ì´ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.</p>`;

            advice += `<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, ì‚¬ì£¼ëŠ” í•˜ëŠ˜ì´ ì¤€ ì²­ì‚¬ì§„ì¼ ë¿ ìµœì¢…ì ì¸ ì¸ìƒì€ ê·€í•˜ì˜ ì„ íƒê³¼ ë…¸ë ¥ìœ¼ë¡œ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤. ê¸ì •ì ì¸ ë§ˆìŒê°€ì§ê³¼ ëŠì„ì—†ëŠ” ë…¸ë ¥ìœ¼ë¡œ ë” ë‚˜ì€ ë¯¸ë˜ë¥¼ ê°œì²™í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤. ğŸŒŸ</p>`;

            return advice;
        }

        // ê³µìœ  ê¸°ëŠ¥
        function shareKakao() {
            const name = document.getElementById('name').value || 'ì‚¬ìš©ì';

            if (typeof Kakao === 'undefined') {
                alert('ì¹´ì¹´ì˜¤ SDKë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨ í•´ì£¼ì„¸ìš”.');
                return;
            }
            if (!Kakao.isInitialized()) {
                Kakao.init('bf0fd5739aebee3aa7cd7e8ec516f118');
            }

            Kakao.Share.sendDefault({
                objectType: 'feed',
                content: {
                    title: 'ğŸ”® í”„ë¦¬ë¯¸ì—„ ì‚¬ì£¼íŒ”ì',
                    description: `${name}ë‹˜ì˜ ì‚¬ì£¼ ìš´ëª… ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!`,
                    imageUrl: 'https://via.placeholder.com/800x400/0a0a0a/a78bfa?text=' + encodeURIComponent('ğŸ”® ì‚¬ì£¼íŒ”ì'),
                    link: {
                        mobileWebUrl: window.location.href,
                        webUrl: window.location.href
                    }
                },
                buttons: [{
                    title: 'ë‚˜ë„ ì‚¬ì£¼ ë³´ê¸°',
                    link: {
                        mobileWebUrl: window.location.href.split('?')[0],
                        webUrl: window.location.href.split('?')[0]
                    }
                }]
            });
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰');
            }).catch(() => {
                alert('ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            });
        }

        function shareTwitter() {
            const text = `ğŸ”® ì‚¬ì£¼íŒ”ì ìš´ëª… ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!`;
            const url = window.location.href;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ URL íŒŒë¼ë¯¸í„° ì²´í¬
        window.addEventListener('load', () => {
            if (typeof Kakao !== 'undefined' && !Kakao.isInitialized()) {
                Kakao.init('bf0fd5739aebee3aa7cd7e8ec516f118');
            }

            const params = new URLSearchParams(window.location.search);
            const name = params.get('name');
            const gender = params.get('g');
            const year = params.get('y');
            const month = params.get('m');
            const day = params.get('d');
            const hour = params.get('h');
            const calendar = params.get('c');

            if (name && gender && year && month && day && hour && calendar) {
                // í¼ì— ê°’ ì±„ìš°ê¸°
                document.getElementById('name').value = name;
                document.getElementById('gender').value = gender;
                document.getElementById('year').value = year;
                document.getElementById('month').value = month;
                document.getElementById('day').value = day;
                document.getElementById('hour').value = hour;
                document.getElementById('calendar').value = calendar;

                // ë°”ë¡œ ê²°ê³¼ í‘œì‹œ (ë¡œë”© ì—†ì´)
                const result = generateDetailedFortune(name, gender, parseInt(year), parseInt(month), parseInt(day), hour, calendar);
                document.getElementById('result').innerHTML = result;
                document.getElementById('result').classList.add('show');
            }
        });
    </script>
</body>
</html>
